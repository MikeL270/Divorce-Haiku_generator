<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Divorce Haiku Generator</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/main.css' ) }}"/>
        <script src="https://code.iconify.design/iconify-icon/1.0.8/iconify-icon.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>
        <script src="{{url_for('static', filename='js/frontend.js')}}"></script>
        <script>
            // I could not dedicate the time to write this functionality in vue.js as exactly how to
            // do it is not straight forward. So, instead I will write it in plain js so I can turn
            // this in on time.
            document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('anger-input').addEventListener('input', function(){
                var anger = document.getElementById('anger-input').value;
                document.body.style.backgroundImage = `url('static/images/anger${anger}.webp')`
                })
            })
        </script>
    </head>
    <body>
        <header>
                <h1> Divorce Letter Haiku Generator </h1>
        </header>
        <main>
            <div id="vue-container">
                <div id="options-container" class="ui-container">
                    <div id="generator-options" class="ui-tab" v-show="activeTab === 1"> 
                        <label for="name-input">Name:</label>
                        <input type="text" ref="nameInputRef" id="name-input" placeholder="Enter name" >
                        <label for="reason-input">Reason:</label>
                        <input type="text" ref="reasonInputRef" id="reason-input" placeholder="Enter reason" >
                        <label for="anger-input">Anger:</label>
                        <input type="range" ref="angerInputRef" id="anger-input" min="1" max="10" value="1" >
                        <button id="generate_button" v-on:click="send_haiku()">
                            <p>Generate Haiku</p>
                        </button>
                    </div>
                    <div id="settings-options" id="generator-options" class="ui-tab" v-show="activeTab === 2">
                        <div id="settings-disclaimer">
                            <p>This is an open source project, meaning it was designed so that you can self host
                                an instance on your own hardware on your own network. That is what this feature 
                                is meant for. <b>This feature is intentionally disabled on the public web facing
                                version.</b> 
                                <br>
                                <br>
                            This feature is for your convenience, as I will not fund the api after its initial 
                            funding is consumed. I do not want to contribute to the garbageware problem and so 
                            I find it prudent to ensure that even this joke app can still be used after my 
                            instructor fails me. 
                            <br> 
                            <br>
                            It should go without saying that this open source software comes with absolutely no  
                            warranty. If you plug your own api key into this software and point it to the 
                            interwebs and some script kiddie steals it, that is on you. Don't try to sue me, I
                            clicked the license button in github. (check mate, nerd) 
                            </p>
                        </div>
                        <label for="api-input">API Key:</label>
                        <input type="text" ref="apiInputRef" id="api-input" placeholder="Please read the text above">
                        <button id="api-button" @click="set_custom_key()">
                            <p>Insert API Key</p>
                        </button>
                    </div>
                    <div id="gen-nav" class="navigation-bar">
                        <button id="generator-button" class="navigation-button" @click="activate_gen_tab(1)">
                            <p>Generator</p>
                        </button>
                        <button id="settings-button" class="navigation-button" @click="activate_gen_tab(2)">
                            <p>Settings</p>
                        </button>
                    </div>
                </div>
                <div id="output-container" class="ui-container">
                    <div id="output-window" class="ui-tab">
                        <pre id="output">{{ '{{ generatedHaiku }}' }}</pre>
                    </div>
            </div>
        </main>
        <footer>
            <div>
                <p>&copy; <script>document.write(new Date().getFullYear())</script> Michael B. Lance, all rights reserved | Alpha v1.1</p> 
            </div>
            <div class="social_links">
                <a href="https://github.com/MikeL270/Divorce-Haiku_generator" target="_blank">
                    <iconify-icon icon="mdi:github" width="1.2em" height="1.2em"  style="color: #0406a4"></iconify-icon>
                </a>
            </div>
        </footer>
</html>